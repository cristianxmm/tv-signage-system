<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>TV Display</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background-color: #000; }
        iframe { width: 100%; height: 100%; border: none; }
        #status { position: absolute; top: 0; right: 0; color: lime; font-family: monospace; padding: 5px; z-index: 100; }
    </style>
</head>
<body>
    <div id="status">Conectando...</div>
    <iframe id="main-frame" src="about:blank" allow="autoplay; fullscreen"></iframe>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const frame = document.getElementById('main-frame');
        const status = document.getElementById('status');

        socket.on('connect', () => {
            status.innerText = "Online ID: " + socket.id;
            setTimeout(() => { status.style.display = 'none'; }, 5000); // Ocultar status a los 5s
        });

        socket.on('update_screen', (url) => {
            console.log("Cambiando URL a:", url);
            frame.src = url;
        });

        // Refresco defensivo cada hora para limpiar memoria de la TV
        setTimeout(() => window.location.reload(), 3600000);
    </script>
</body>
</html>